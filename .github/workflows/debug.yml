name: github action to print rails version

on:
  push:
    branches:
      - main
jobs: 
  build:
    name: run job for github.ref_name
    runs-on: [ubuntu-latest]

    steps:
      - name: find honeybadger environment
        run: |
          if [ ${{ github.ref_name }} == "master" ]; then
            echo "::set-output name=honeybader_environment::production
          else
            echo "::set-output name=honeybadger_environment::staging
          fi

      - name: print bloddy everything
        run: |
          echo ${{github}}
          echo ${{github.ref}}
          echo ${{github.ref_name}}
      - name: Print bloddy everything
        run: |
          if [ ${{ github.ref_name }} == "staging" ]; then
            echo ${{github}}
            echo ${{github.ref}}
            echo ${{github.ref_name}}
          else
            echo My Name is Sabin Nepal
          fi
      - name: Send Honeybadger Notification
        uses: honeybadger-io/github-notify-deploy-action@v1
        with:
          api_key: hbp_9JchL0CTSoHaevIQn95TBWAwxS48OD0kj0mu
          environment: ${{ steps.find_honeybadger_environment.outputs.honeybadger_environment }}

     
#      - uses: actions/checkout@v2
#      - uses: ruby/setup-ruby@v1
#        with:
#          ruby-version: 3.1.0
#          bundler-cache: true
#        id: setup_ruby
#      - name: print ruby-setup output
#        run: |
#          echo ${{join(steps.setup_ruby.outputs.*, '\n')}}
#          echo ${{join(steps.setup_ruby.outputs.ruby-prefix, '\n')}}
#          
#      - name: print all the environment variables from ci
#        run: echo ${GITHUB_REF##*/}
#  deploy:
#    name: deploy code
#    runs-on: [ubuntu-latest, github.ref_name ]
#    steps:
#    - run: |
#        echo ${{join(jobs.build.steps.setup_ruby.outputs.ruby-prefix, '\n')}}
